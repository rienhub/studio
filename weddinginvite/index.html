<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- DIUBAH SUAI: Menambah nama pasangan kedua pada tajuk -->
    <title>Jemputan Walimatul Urus | Amrin & Sabrina | Raziq & Rasyiqah</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Noto+Serif:ital@0;1&family=Tangerine:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* === PENETAPAN ASAS === */
        html { font-size: clamp(0.9375rem, 0.75rem + 0.5vw, 1.125rem); }

        /* === TETAPAN UTAMA TEMA === */
        :root {
            --theme-primary: #004d40; --theme-secondary: #b8860b; --theme-text: #333;
            --theme-background: #FDFBF5; --theme-grey-bg: #D9DDD4;
            --font-calligraphy: 'Tangerine', cursive; --font-display: 'Playfair Display', serif;
            --font-body: 'Noto Serif', serif; --nav-height: 65px;
        }

        /* === ANIMASI === */
        @keyframes heartbeat { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .spinning { animation: spin 3s linear infinite; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.7; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(1); opacity: 0.7; } }
        .footer-link-animate { animation: pulse 2s infinite ease-in-out; display: inline-block; }
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(var(--start-rotate, 0deg)) translateX(0vw); opacity: 0.9; }
            100% { transform: translateY(110vh) rotate(calc(var(--start-rotate, 0deg) + 720deg)) translateX(var(--drift, 0vw)); opacity: 0.5; }
        }
        /* DIUBAH SUAI: Animasi kemasukan elegan untuk muka depan */
        @keyframes elegantEntrance {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* DIUBAH SUAI: Animasi denyutan moden untuk bulatan */
        @keyframes pulse-border {
            0% { transform: scale(1); opacity: 0.5; }
            70% { transform: scale(1.15); opacity: 0; }
            100% { transform: scale(1.15); opacity: 0; }
        }
        /* DITAMBAH: Animasi untuk kotak muka depan */
        @keyframes fadeInBox {
            from { opacity: 0; transform: scale(0.97); }
            to { opacity: 1; transform: scale(1); }
        }


        .songket-bg { background-color: var(--theme-primary); background-image: linear-gradient(45deg, rgba(255, 215, 0, 0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(255, 215, 0, 0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(255, 215, 0, 0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(255, 215, 0, 0.1) 75%); background-size: 20px 20px; color: #ffffff; }

        /* === GAYA ASAS (BODY) === */
        html, body { font-family: var(--font-body); background-color: var(--theme-grey-bg); color: var(--theme-text); margin: 0; padding: 0; overflow-x: hidden; width: 100%; scroll-behavior: smooth; }
        body { padding-bottom: calc(var(--nav-height) + 20px + env(safe-area-inset-bottom, 10px)); }
        .no-scroll { overflow: hidden; }

        /* === PEMBUNGKUS UTAMA === */
        .card-container { width: 100%; max-width: 700px; margin: 0 auto; background-color: var(--theme-grey-bg); position: relative; }
        .content-wrapper { margin: 0 auto; max-width: 550px; width: 90%; background-color: var(--theme-background); border-left: 2px solid var(--theme-secondary); border-right: 2px solid var(--theme-secondary); border-top: 2px solid var(--theme-secondary); position: relative; z-index: 2; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1), 0 2px 5px rgba(0, 0, 0, 0.05), 0 0 20px 2px rgba(253, 251, 245, 0.5);
            /* DIUBAH SUAI: Menambah border-bottom untuk melengkapkan bingkai */
            border-bottom: 2px solid var(--theme-secondary);
            /* DIUBAH SUAI: Menambah tekstur kertas yang realistik */
            background-image: url(https://www.transparenttextures.com/patterns/paper.png);
        }

        /* DIUBAH SUAI: Menambah hiasan sudut SVG */
        .content-wrapper::before,
        .content-wrapper::after {
            content: '';
            position: absolute;
            width: 100px;
            height: 100px;
            /* DIUBAH SUAI: Z-index dinaikkan */
            z-index: 3;
            background-color: var(--theme-secondary);
            opacity: 0.15;
            pointer-events: none;
        }

        .content-wrapper::before {
            top: 0;
            left: 0;
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M0 0 H100 V2 L0 2 M0 0 V100 H2 V0' fill='black'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M0 0 H100 V2 L0 2 M0 0 V100 H2 V0' fill='black'/%3E%3C/svg%3E");
        }

        .content-wrapper::after {
            bottom: 0;
            right: 0;
            mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M100 100 H0 V98 H100 M100 100 V0 H98 V100' fill='black'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M100 100 H0 V98 H100 M100 100 V0 H98 V100' fill='black'/%3E%3C/svg%3E");
        }


        section { padding: 40px 20px; text-align: center; position: relative; z-index: 2; background-color: var(--theme-background); 
            /* DIUBAH SUAI: Menambah tekstur kertas juga (latar belakang lutsinar) */
            background-image: url(https://www.transparenttextures.com/patterns/paper.png);
            background-color: transparent;
        }
        .songket-footer { background-color: transparent; }

        /* === SKRIN UTAMA (MUKA DEPAN) === */
        .front-page { min-height: 95vh; height: auto; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 50px 10px; box-sizing: border-box; background-color: var(--theme-background); background-image: linear-gradient(60deg, var(--theme-grey-bg) 18%, transparent 19%, transparent 81%, var(--theme-grey-bg) 82%), linear-gradient(-60deg, var(--theme-grey-bg) 18%, transparent 19%, transparent 81%, var(--theme-grey-bg) 82%); background-size: 100% 100%; background-position: center; background-repeat: no-repeat; position: relative; z-index: 2; }
        .front-page-content { 
            background-color: rgba(255, 255, 255, 0.7); padding: 60px 40px; border-radius: 25px; border: 2px solid var(--theme-secondary); text-align: center; max-width: 80%; width: auto; box-sizing: border-box; position: relative; z-index: 2; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2), 0 8px 20px rgba(0, 0, 0, 0.1), 0 0 25px 3px rgba(255, 255, 255, 0.6); 
            /* DIUBAH SUAI: Menambah tekstur kertas yang realistik */
            background-image: url(https://www.transparenttextures.com/patterns/paper.png);
            /* DIUBAH SUAI: Menambah animasi pada kotak itu sendiri */
            opacity: 0;
            animation: fadeInBox 0.7s ease-out 1.8s forwards;
        }
        
        /* DIUBAH SUAI: Hiasan kubah diletak di tengah sebagai latar belakang */
        .front-page-content::before {
            content: '';
            position: absolute;
            top: 10%; /* Inset dari atas */
            left: 10%; /* Inset dari kiri */
            right: 10%; /* Inset dari kanan */
            bottom: 10%; /* Inset dari bawah */
            /* DIUBAH SUAI: SVG Kubah Masjid ditukar kepada rekaan yang lebih menarik/jelas */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M50 0 C 51.9 0 53.5 1.1 54.3 2.7 C 52.9 3.4 52 4.8 52 6.5 C 52 9 54 11 56.5 11 C 59 11 61 9 61 6.5 C 61 4.8 60.1 3.4 58.7 2.7 C 59.5 1.1 61.1 0 63 0 C 65.8 0 68 2.2 68 5 C 68 7.8 65.8 10 63 10 L 50 10 L 50 15 C 20 15 10 40 10 70 L 90 70 C 90 40 80 15 50 15 Z' fill='%23b8860b'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center center;
            background-size: contain;
            /* DIUBAH SUAI: Opacity dinaikkan sedikit & blend mode ditukar ke 'soft-light' untuk kesan watermark */
            opacity: 0.15; /* Dinaikkan sedikit dari 0.1 */
            mix-blend-mode: soft-light;
            z-index: 1; /* Letak di belakang teks (yang ada z-index: 5) */
        }
        
        /* DIUBAH SUAI: Memastikan teks di hadapan hiasan kubah */
        .front-page-content h2,
        .front-page-content h1,
        .front-page-content .date,
        .front-page-content .hashtag {
            position: relative;
            z-index: 5;
        }

        /* DIUBAH SUAI: Menggunakan animasi kemasukan baharu */
        .front-page-content h2 { 
            font-family: var(--font-calligraphy); font-size: 3.5rem; font-weight: 700; color: var(--theme-secondary); margin: 0 0 10px 0; letter-spacing: 1px; line-height: 1;
            /* Animasi baharu */
            opacity: 0;
            /* DIUBAH SUAI: Delay dilaraskan supaya main selepas kotak muncul */
            animation: elegantEntrance 0.8s ease-out 2.4s forwards;
        }
        .invitation-topic { font-family: var(--font-calligraphy); font-size: clamp(2.5rem, 1rem + 8vw, 3.5rem); color: var(--theme-secondary); margin-top: 0; margin-bottom: 10px; letter-spacing: 1px; }
        .front-page-content h1 { 
            font-family: var(--font-calligraphy); font-size: clamp(2.8rem, 1rem + 8vw, 4.5rem); color: var(--theme-primary); margin: 10px 0; line-height: 1.1; text-shadow: none;
            /* Animasi baharu */
            opacity: 0;
            /* DIUBAH SUAI: Delay dilaraskan */
            animation: elegantEntrance 0.8s ease-out 2.6s forwards;
        }
        .front-page-content .date { 
            font-family: var(--font-body); font-size: 1.1rem; color: var(--theme-text); margin-top: 15px; margin-bottom: 5px; letter-spacing: 0.5px;
            /* Animasi baharu */
            opacity: 0;
            /* DIUBAH SUAI: Delay dilaraskan */
            animation: elegantEntrance 0.8s ease-out 2.8s forwards;
        }
        .front-page-content .hashtag { 
            font-family: var(--font-display); font-size: 1.3rem; color: var(--theme-secondary); margin-top: 8px; margin-bottom: 0; letter-spacing: 0.5px;
            /* Animasi baharu */
            opacity: 0;
            /* DIUBAH SUAI: Delay dilaraskan */
            animation: elegantEntrance 0.8s ease-out 2.9s forwards;
        }

        /* DIUBAH SUAI: Pemisah hiasan */
        .couple-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 15px 0;
            font-size: 1.5rem;
            color: var(--theme-secondary);
        }
        .divider-line {
            width: 80px;
            height: 1px;
            background-color: var(--theme-secondary);
            opacity: 0.5;
            margin: 0 10px;
        }

        /* === BAHAGIAN JEMPUTAN === */
        section.songket-footer { padding: 20px 20px; text-align: center; font-style: italic; color: #777; margin-top: 20px; }
        .invitation p { font-size: 1rem; line-height: 1.8; margin: 15px 0; }
        .hosts { font-family: var(--font-display); font-size: 1.4rem; font-weight: 700; color: var(--theme-primary); margin: 10px 0 10px 0; }
        .couple-name { font-family: var(--font-calligraphy); font-size: clamp(1.8rem, 0.5rem + 7vw, 2.8rem); color: var(--theme-secondary); margin: 10px 0 0 0; line-height: 1; letter-spacing: 1px; }
        .couple-amp { font-family: var(--font-calligraphy); font-size: 2.5rem; color: var(--theme-secondary); margin: 5px 0; letter-spacing: 1px; }
        .bismillah-text { font-family: 'Amiri', serif; font-size: 2.0rem; color: var(--theme-primary); margin-top: 15px; margin-bottom: 15px; font-weight: 700; white-space: nowrap; overflow-x: hidden; text-overflow: clip; direction: rtl; justify-content: center; display: block; }
        .bismillah-svg { width: 80%; max-width: 400px; height: auto; margin-top: 15px; margin-bottom: 15px; display: block; margin-left: auto; margin-right: auto; }
        .bismillah-svg path { fill: var(--theme-primary); }

        /* === BAHAGIAN INFO MAJLIS === */
        .details h3 { font-family: var(--font-display); font-size: 1.7rem; color: var(--theme-primary); border-bottom: none; display: flex; align-items: center; justify-content: center; padding-bottom: 0; margin-bottom: 15px; margin-top: 40px; gap: 10px; }
        .details h3 i { font-size: 1.3rem; color: var(--theme-secondary); }
        .details p { font-size: 1.1rem; line-height: 1.7; margin: 8px 0; }
        .details strong { font-size: 1.1rem; color: var(--theme-text); font-weight: normal; line-height: 1.7; }
        .doa p { font-style: italic; font-size: 1rem; line-height: 1.7; }
        .map-container { margin-top: 25px; margin-bottom: 15px; }
        /* DIBUANG: .map-image */
        .map-links { display: flex; justify-content: center; gap: 15px; margin-top: 15px; flex-wrap: wrap; }
        .map-links a { font-size: 0.95rem; font-weight: bold; color: var(--theme-primary); text-decoration: none; padding: 8px 15px; border: 1px solid var(--theme-primary); border-radius: 20px; transition: all 0.3s ease; }
        .map-links a:hover { background-color: var(--theme-primary); color: white; border-color: var(--theme-primary); }
        .map-links i { margin-right: 5px; }
        #btn-add-calendar-inline { margin-top: 20px; margin-bottom: 10px; display: inline-flex; }

        /* === BAHAGIAN RSVP PROMPT === */
        .rsvp-prompt { padding-top: 40px; padding-bottom: 20px; }
        .rsvp-prompt p { font-style: italic; font-size: 1rem; line-height: 1.8; color: #555; max-width: 450px; margin: 0 auto 20px auto; }
        #btn-rsvp-inline { margin-top: 10px; display: inline-flex; }

        /* === COUNTDOWN === */
        #countdown { display: flex; justify-content: center; gap: 10px; margin-top: 30px; flex-wrap: nowrap; overflow-x: auto; padding-bottom: 5px; -webkit-overflow-scrolling: touch; }
        .time-block { background: #ffffff; border: 1px solid #eee; color: var(--theme-primary); padding: 10px; border-radius: 5px; width: 70px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); flex-shrink: 0; }
        .time-block span { display: block; font-size: 1.6rem; font-family: var(--font-display); font-weight: bold; }
        .time-block .label { font-size: 0.7rem; text-transform: uppercase; color: #555; font-family: var(--font-body); }

        /* === SENARAI UCAPAN === */
        .wishes h3 { margin-top: 40px; }
        .wishes-list { max-height: 300px; overflow-y: auto; border: 1px solid #eee; border-radius: 8px; padding: 10px; text-align: left; background: #ffffff; max-width: 400px; margin: 0 auto; box-sizing: border-box; }
        .wish-item { border-bottom: 1px dashed #ddd; padding: 15px 10px; } .wish-item:last-child { border-bottom: none; }
        .wish-text { font-style: italic; font-size: 0.95rem; line-height: 1.6; margin: 0 0 10px 0; color: #333; }
        .wish-author { font-weight: bold; font-size: 0.85rem; color: var(--theme-primary); margin: 0; }

        /* === ANIMASI SKROL === */
        .animate-on-scroll { opacity: 0; transform: translateY(50px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }

        /* === COVER MUKA DEPAN (OVERLAY) === */
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; display: flex; justify-content: center; align-items: center; cursor: pointer; padding: 20px; box-sizing: border-box; transform-style: preserve-3d; flex-direction: column; background-color: rgba(0, 0, 0, 0.5); }
        .cover-half { position: absolute; width: 50%; height: 100%; background-color: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); backface-visibility: hidden; transition: transform 1.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); z-index: 10000; }
        .cover-half.left { left: 0; transform-origin: left center; } .cover-half.right { right: 0; transform-origin: right center; }
        .circle-chop { position: relative; z-index: 10001; width: 200px; height: 200px; background-color: var(--theme-background); border: 3px solid var(--theme-secondary); border-radius: 50%; text-align: center; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 5px 20px rgba(0,0,0,0.15); transition: opacity 0.5s ease-out; padding: 20px; box-sizing: border-box; flex-shrink: 0; animation: heartbeat 1.5s infinite ease-in-out; }
        
        /* DIUBAH SUAI: Menggantikan hiasan berputar dengan 'pulse' moden */
        .circle-chop::before,
        .circle-chop::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            z-index: -1;
            left: -10px;
            top: -10px;
            right: -10px;
            bottom: -10px;
            border: 1px solid var(--theme-secondary);
        }

        .circle-chop::before {
            /* Bingkai statik nipis */
            opacity: 0.3;
        }
        
        .circle-chop::after {
            /* Bingkai luar yang berdenyut */
            animation: pulse-border 2.5s infinite ease-out;
            border-width: 2px; /* Jadikan denyutan lebih tebal sedikit */
            opacity: 0; /* Mula pudar */
        }

        .curved-text-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: visible; }
        .curved-text-svg text { font-family: var(--font-calligraphy); font-size: 24px; letter-spacing: normal; font-weight: 700; fill: var(--theme-primary); }
        .circle-chop h1 { 
            display: block; font-family: var(--font-calligraphy); 
            /* DIUBAH SUAI: Saiz fon dan jarak baris dilaraskan */
            font-size: 1.5rem; 
            line-height: 1.2; 
            color: var(--theme-primary); font-weight: 700; margin: 10px 0 5px 0; position: relative; z-index: 2; padding: 0 5px; 
        }
        .open-prompt { font-family: var(--font-body); font-size: 0.8rem; color: #ffffff; font-weight: bold; text-align: center; margin-top: 20px; border: 1px solid rgba(255, 255, 255, 0.4); padding: 8px 20px; border-radius: 50px; transition: opacity 0.5s ease-out; background-color: rgba(0, 0, 0, 0.4); letter-spacing: 1px; z-index: 10001; }
        body.is-open .circle-chop, body.is-open .open-prompt { opacity: 0; pointer-events: none; } body.is-open .cover-half.left { transform: rotateY(-180deg); } body.is-open .cover-half.right { transform: rotateY(180deg); } body.is-open .overlay { pointer-events: none; transition: z-index 0s 1.8s; z-index: -1; }

        /* === NAVIGASI BAWAH === */
        .bottom-nav { position: fixed; bottom: 0; left: 0; right: 0; max-width: 700px; margin: 0 auto; display: flex; justify-content: space-around; align-items: center; z-index: 10; padding-top: 8px; padding-bottom: calc(8px + env(safe-area-inset-bottom, 10px)); box-shadow: 0 -2px 10px rgba(0,0,0,0.15); background-color: var(--theme-primary); height: var(--nav-height); box-sizing: border-box; }
        .nav-button { background: none; border: none; color: white; font-family: var(--font-body); font-size: 0.7rem; text-align: center; cursor: pointer; flex: 1; padding: 6px 5px; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; transition: background-color 0.2s ease-out, transform 0.1s ease-out; -webkit-tap-highlight-color: transparent; }
        .nav-button i { font-size: 1.15rem; display: block; margin-bottom: 4px; }
        .nav-button:active { background-color: rgba(255, 255, 255, 0.15); transform: scale(0.96); }

        /* === BUTANG MUZIK === */
        #music-toggle { position: fixed; bottom: calc(var(--nav-height) + 20px + env(safe-area-inset-bottom, 10px)); right: 20px; z-index: 9; width: 45px; height: 45px; background-color: var(--theme-secondary); color: white; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; font-size: 1.1rem; box-shadow: 0 4px 10px rgba(0,0,0,0.2); cursor: pointer; transition: background-color 0.3s, transform 0.3s; opacity: 0; pointer-events: none; }
        body.is-open #music-toggle { opacity: 0.8; pointer-events: auto; transition: opacity 0.5s 2s; }
        #music-toggle:hover { opacity: 1; transform: scale(1.1); }

        /* DITAMBAH: Butang Kebolehaksesan (Accessibility) */
        #accessibility-toggle {
            position: fixed;
            bottom: calc(var(--nav-height) + 20px + env(safe-area-inset-bottom, 10px));
            right: 75px; /* (45px width + 20px right + 10px gap) */
            z-index: 9;
            width: 45px; height: 45px;
            background-color: #0078D4; /* Biru */
            color: white;
            border-radius: 50%; border: none;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.1rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s, opacity 0.5s;
            opacity: 0;
            pointer-events: none;
        }
        body.is-open #accessibility-toggle {
            opacity: 0.8;
            pointer-events: auto;
            transition: opacity 0.5s 2s;
        }
        #accessibility-toggle:hover { opacity: 1; transform: scale(1.1); }
        #accessibility-toggle.active { background-color: var(--theme-secondary); }


        /* === MODAL (POP-UP) === */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 20; display: none; justify-content: center; align-items: center; }
        .modal-content { background: var(--theme-background); width: 90%; max-width: 400px; padding: 20px 30px; border-radius: 10px; position: relative; text-align: center; }
        .modal-close { position: absolute; top: 10px; right: 15px; font-size: 1.75rem; font-weight: bold; cursor: pointer; color: #aaa; }
        .modal h4 { font-family: var(--font-display); font-size: 1.7rem; color: var(--theme-secondary); margin-top: 10px; margin-bottom: 20px; }
        .modal-button { display: flex; align-items: center; justify-content: center; background-color: var(--theme-primary); color: #ffffff; padding: 12px 25px; text-decoration: none; border-radius: 8px; font-size: 0.95rem; font-weight: bold; margin: 10px 0; transition: background-color 0.3s; border: none; }
        .modal-button:hover { background-color: var(--theme-secondary); } .modal-button i { margin-right: 10px; }
        .modal-button.whatsapp { background-color: #25D366; } .modal-button.whatsapp:hover { background-color: #1EAE50; }
        .modal-button.telefon { background-color: #0078D4; } .modal-button.telefon:hover { background-color: #005a9e; }
        .modal-button.waze { background: #33ccff; }
        .modal-button.google { background-color: #4285F4; } .modal-button.google:hover { background-color: #357ae8; }
        .modal-button.apple { background-color: #000000; } .modal-button.apple:hover { background-color: #333333; }

        /* === BORANG RSVP === */
        .rsvp-form { max-width: 400px; margin: 0 auto; text-align: left; } .form-group { margin-bottom: 15px; } .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #555; font-size: 0.95rem; } .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; font-family: var(--font-body); font-size: 0.95rem; } .radio-group { display: flex; gap: 20px; margin: 10px 0; flex-wrap: wrap; } .radio-group label { font-weight: normal; display: flex; align-items: center; gap: 5px; font-size: 1rem; } .radio-group input { width: auto; } .pax-group { display: flex; gap: 10px; } .rsvp-form .pax-options label { margin-right: 15px; } .form-submit { background-color: var(--theme-secondary); color: #ffffff; padding: 12px 30px; text-decoration: none; border-radius: 8px; font-size: 1rem; font-weight: bold; margin-top: 10px; cursor: pointer; border: none; width: 100%; transition: background-color 0.3s; } .form-submit:hover { background-color: var(--theme-primary); } .form-submit:disabled { background-color: #ccc; cursor: not-allowed; } #rsvp-message { margin-top: 20px; font-size: 1rem; font-weight: bold; }

        /* === KOTAK ATUR CARA MAJLIS === */
        .program-box { width: 90%; max-width: 400px; margin: 30px auto 0 auto; padding: 20px; background: #ffffff; border: 1px solid #eee; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); text-align: left; box-sizing: border-box; }
        .program-box h4 { font-family: var(--font-display); font-size: 1.4rem; color: var(--theme-primary); text-align: center; margin-top: 0; margin-bottom: 20px; }
        .program-box ul { list-style: none; padding: 0; margin: 0; } .program-box li { display: flex; padding: 10px 0; border-bottom: 1px dashed #ddd; font-size: 0.95rem; color: var(--theme-text); align-items: center; } .program-box li:last-child { border-bottom: none; } .program-box li strong { font-family: var(--font-body); font-weight: bold; color: var(--theme-text); width: 120px; flex-shrink: 0; font-size: 0.9rem; padding-right: 10px; } .program-box li span { flex-grow: 1; }

        /* === FOOTER KREDIT === */
        .signature-footer { padding: 30px 20px; text-align: center; margin-top: 40px; border-top: 1px solid #eee; background-color: transparent; }
        .signature-footer p { font-family: var(--font-body); font-size: 0.85rem; color: #888; margin: 5px 0; letter-spacing: 0.2px; line-height: 1.6; }
        .signature-footer a { color: var(--theme-primary); text-decoration: none; font-weight: bold; }
        .signature-footer a:hover { text-decoration: underline; color: var(--theme-secondary); }

        /* === CSS KELOPAK DIUBAHSUAI UNTUK JS === */
        .petals-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; pointer-events: none; z-index: 5; }
        .petal { position: absolute; top: -10vh; background-color: var(--theme-secondary); border-radius: 10px 50% / 20px 50%; opacity: 0; animation: fall linear infinite; --start-rotate: 0deg; --drift: 0vw; }

        /* === RESPONSIVE DESIGN === */
        @media (max-width: 650px) { .content-wrapper { max-width: none; width: 90%; } }
        @media (max-width: 480px) {
             section { padding-left: 15px; padding-right: 15px; }
            .circle-chop { width: 180px; height: 180px; } .curved-text-svg text { font-size: 20px; } .circle-chop h1 { font-size: 1.5rem; }
             .open-prompt { font-size: 0.75rem; padding: 7px 18px; margin-top: 15px;}
            .front-page-content { padding: 50px 20px; max-width: 85%; border-radius: 20px;}
            .details h3 { font-size: 1.5rem; margin-top: 25px; margin-bottom: 10px; } .details h3 i { font-size: 1.1rem; }
            .wishes h3 { font-size: 1.5rem; }
            .details p { line-height: 1.7; margin: 5px 0; } .program-box { margin-top: 25px; }
            /* DIBUANG: .map-image */
            .map-links a { font-size: 0.9rem; padding: 7px 12px; }
            #btn-add-calendar-inline, #btn-rsvp-inline { font-size: 0.9rem; padding: 10px 20px; }
            .time-block { width: 60px; padding: 8px 5px; } .time-block span { font-size: 1.4rem; } .time-block .label { font-size: 0.65rem; } #countdown { gap: 8px; }
            .nav-button { font-size: 0.65rem; } .nav-button i { font-size: 1.05rem; } :root { --nav-height: 60px; }
            #music-toggle { bottom: calc(var(--nav-height) + 15px + env(safe-area-inset-bottom, 10px)); right: 15px; width: 40px; height: 40px; font-size: 1rem; }
             .petal { width: 12px; height: 16px; }
            /* DITAMBAH: Responsive untuk butang accessibility */
            #accessibility-toggle {
                right: 65px; /* (40px width + 15px right + 10px gap) */
                width: 40px; height: 40px; font-size: 1rem;
                bottom: calc(var(--nav-height) + 15px + env(safe-area-inset-bottom, 10px));
            }
        }
        @media (max-width: 360px) {
            .circle-chop { width: 160px; height: 160px; } .curved-text-svg text { font-size: 18px; } .circle-chop h1 { font-size: 1.3rem; }
            .time-block { width: 55px; } .time-block span { font-size: 1.3rem; } .time-block .label { font-size: 0.6rem; } #countdown { gap: 5px; }
            .nav-button i { font-size: 1.1rem; } .program-box li strong { width: 100px; }
            /* DIBUANG: .map-image */
             .petal { width: 10px; height: 13px; }
        }

        /* DITAMBAH: GAYA MOD KEBOLEHAKSESAN (HIGH CONTRAST) */
        body.accessibility-mode {
            --theme-primary: #FFFF00; /* Kuning Terang */
            --theme-secondary: #33ccff; /* Biru Terang */
            --theme-text: #FFFFFF;
            --theme-background: #000000;
            --theme-grey-bg: #000000;
            font-size: clamp(1.1rem, 0.75rem + 1vw, 1.35rem); /* Besarkan fon asas */
        }
        body.accessibility-mode .content-wrapper,
        body.accessibility-mode section,
        body.accessibility-mode .time-block,
        body.accessibility-mode .wishes-list,
        body.accessibility-mode .program-box,
        body.accessibility-mode .modal-content,
        body.accessibility-mode .circle-chop {
            background-color: #000000 !important;
            color: #FFFFFF !important;
            background-image: none !important; /* Buang tekstur kertas */
        }
        body.accessibility-mode .content-wrapper,
        body.accessibility-mode .front-page-content,
        body.accessibility-mode .circle-chop {
            border-color: var(--theme-primary) !important;
        }
        body.accessibility-mode .front-page-content {
            box-shadow: 0 0 15px var(--theme-primary);
        }
        body.accessibility-mode .front-page-content::before, /* Sembunyi kubah */
        body.accessibility-mode .petals-container, /* Sembunyi kelopak */
        body.accessibility-mode .content-wrapper::before, /* Sembunyi hiasan */
        body.accessibility-mode .content-wrapper::after { /* Sembunyi hiasan */
            display: none !important;
        }
        body.accessibility-mode .hosts,
        body.accessibility-mode .details h3,
        body.accessibility-mode .program-box h4,
        body.accessibility-mode .wish-author,
        body.accessibility-mode .signature-footer a,
        body.accessibility-mode .curved-text-svg text,
        body.accessibility-mode .bismillah-text,
        body.accessibility-mode .time-block,
        body.accessibility-mode .front-page-content h1,
        body.accessibility-mode .circle-chop h1 {
            color: var(--theme-primary) !important;
        }
        body.accessibility-mode .couple-name,
        body.accessibility-mode .invitation-topic,
        body.accessibility-mode .front-page-content h2,
        body.accessibility-mode .couple-divider,
        body.accessibility-mode .rsvp-prompt p strong,
        body.accessibility-mode .modal h4,
        body.accessibility-mode .details h3 i,
        body.accessibility-mode .invitation p strong {
            color: var(--theme-secondary) !important;
        }
        body.accessibility-mode .bottom-nav {
            background-image: none;
            background-color: #000;
            border-top: 1px solid var(--theme-primary);
        }
        body.accessibility-mode .nav-button,
        body.accessibility-mode .nav-button span {
            color: var(--theme-primary) !important;
        }
        body.accessibility-mode .modal-button,
        body.accessibility-mode .form-submit,
        body.accessibility-mode #btn-rsvp-inline,
        body.accessibility-mode #btn-add-calendar-inline,
        body.accessibility-mode #btn-read-aloud {
            background-color: var(--theme-primary) !important;
            color: #000 !important;
            font-weight: bold;
        }
        body.accessibility-mode .map-links a {
            border-color: var(--theme-primary);
            color: var(--theme-primary);
        }
        body.accessibility-mode .map-links a:hover {
            background-color: var(--theme-primary);
            color: #000;
        }
        body.accessibility-mode .form-group label,
        body.accessibility-mode .details p,
        body.accessibility-mode .form-group input, 
        body.accessibility-mode .form-group select, 
        body.accessibility-mode .form-group textarea {
            color: #FFFFFF !important;
        }
        body.accessibility-mode .form-group input, 
        body.accessibility-mode .form-group select, 
        body.accessibility-mode .form-group textarea {
            background-color: #333;
            border-color: var(--theme-secondary);
        }
        body.accessibility-mode .open-prompt {
            background-color: #000;
            border-color: var(--theme-primary);
            color: var(--theme-primary);
        }

    </style>
</head>
<body>

    <div class="overlay" id="myOverlay">
        <div class="cover-half left"></div> <div class="cover-half right"></div>
        <div class="circle-chop">
            <svg class="curved-text-svg" viewBox="0 0 200 200">
                <path id="curve" d="M 30, 100 a 70,70 0 1,1 140,0" fill="transparent"/>
                <text width="100%"><textPath xlink:href="#curve" startOffset="50%" text-anchor="middle">Walimatul Urus</textPath></text>
            </svg>
            <!-- DIUBAH SUAI: Menambah pasangan kedua -->
            <h1>Amrin & Sabrina<br>❧<br>Raziq & Rasyiqah</h1>
        </div>
        <p class="open-prompt">[ Klik untuk Buka ]</p>
    </div>

    <div class="bottom-nav songket-bg" id="myNavBar">
        <!-- DITAMBAH: Label ARIA -->
        <button class="nav-button" id="btn-calendar" aria-label="Buka Kalendar"><i class="fa-solid fa-calendar-days"></i><span>Kalendar</span></button>
        <button class="nav-button" id="btn-hubungi" aria-label="Hubungi Tuan Rumah"><i class="fa-solid fa-phone"></i><span>Hubungi</span></button>
        <button class="nav-button" id="btn-lokasi" aria-label="Buka Peta Lokasi"><i class="fa-solid fa-map-location-dot"></i><span>Lokasi</span></button>
        <button class="nav-button" id="btn-rsvp" aria-label="Buka borang RSVP"><i class="fa-solid fa-envelope-open-text"></i><span>RSVP</span></button>
    </div>

    <!-- DITAMBAH: Label ARIA -->
    <button id="music-toggle" aria-label="Mainkan atau Hentikan Muzik"><i class="fa-solid fa-music"></i></button>
    <!-- DITAMBAH: Butang Kebolehaksesan dan Label ARIA -->
    <button id="accessibility-toggle" aria-label="Aktifkan Mod Kebolehaksesan"><i class="fa-solid fa-universal-access"></i></button>
    
    <audio id="bg-music" loop>
        <source src="https://raw.githubusercontent.com/rienhub/studio/refs/heads/main/weddinginvite/bungarampaiimstrumental.mp3" type="audio/mpeg">
        Pelayar anda tidak menyokong elemen audio.
    </audio>

    <div class="card-container">
        <div class="petals-container">
            </div>

        <section id="front-page" class="front-page">
            <div class="front-page-content">
                <!-- DIUBAH SUAI: Menggantikan animasi asal dengan animasi baharu (ditakrif dalam CSS) -->
                <h2>Walimatul Urus</h2>
                <h1>Amrin & Sabrina<br>
                    <!-- DIUBAH SUAI: Menggunakan pemisah hiasan -->
                    <span class="couple-divider">
                        <span class="divider-line"></span>
                        ❧
                        <span class="divider-line"></span>
                    </span>
                    Raziq & Rasyiqah
                </h1>
                <p class="date">Sabtu, 27 Disember 2025</p>
                <p class="hashtag"></p>
            </div>
        </section>

        <div class="content-wrapper">
            <!-- DIUBAH SUAI: Tajuk dan ayat dikembalikan -->
            <section id="invitation-couple" style="min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 40px 20px;">
                <h1 class="animate-on-scroll invitation-topic">Raikan Cinta</h1>
                 <h2 class="animate-on-scroll bismillah-text">بِسْـــمِ اللّٰهِ الرَّحْمٰــنِ الرَّحِيْمِ</h2>
                 <div class="hosts animate-on-scroll"> Za'aba bin Hj. Abu Bakar<br> &<br> Haslina Binti Mohd Hawari </div>
                <p class="animate-on-scroll" style="font-size: 1rem; margin: 15px 0 25px 0; font-style: italic;"> Dengan penuh kesyukuran kami menjemput Yang Berbahagia<br> <strong style="font-size: 1.1rem; color: var(--theme-primary); line-height: 1.5; font-style: italic;">Tan Sri/ Puan Sri/ Dato' Seri/ Datin Seri/ Dato’/ Datin/ Tuan/ Puan</strong><br> ke majlis meraikan cinta putera-putera kesayangan kami </p>
                
                <!-- Pasangan Pertama -->
                <h3 class="animate-on-scroll couple-name">Amrin Amsyar bin Za'aba</h3>
                <h2 class="animate-on-scroll couple-amp">&</h2>
                <h3 class="animate-on-scroll couple-name">Sabrina binti Ishak</h3>

                <!-- Pemisah hiasan -->
                <div class="couple-divider animate-on-scroll" style="margin: 25px 0;">
                    <span class="divider-line"></span>
                    ❧
                    <span class="divider-line"></span>
                </div>

                <!-- Pasangan Kedua -->
                <h3 class="animate-on-scroll couple-name">Raziq bin Za'aba</h3>
                <h2 class="animate-on-scroll couple-amp">&</h2>
                <h3 class="animate-on-scroll couple-name">Nur Jaharah Rasyiqah binti Jefri Suzi</h3>

                <!-- DITAMBAH: Butang Baca Jemputan (Text-to-Speech) -->
                <button id="btn-read-aloud" class="modal-button animate-on-scroll" style="margin: 30px auto 10px auto; display: inline-flex; background-color: var(--theme-secondary);">
                    <i class="fa-solid fa-volume-high" style="margin-right: 8px;"></i> Baca Jemputan
                </button>
            </section>

            <section class="details">
                 <h3 class="animate-on-scroll"><i class="fa-solid fa-location-dot"></i>Lokasi</h3>
                 <p class="animate-on-scroll" style="margin-top: 10px;"> di kediaman kami<br> No 112 Jalan Senimas 9,<br> 72000 Kuala Pilah,<br> Negeri Sembilan. </p>
                 
                 <!-- DIUBAH SUAI: Imej peta dibuang -->
                 
                 <div class="map-links animate-on-scroll">
                     <!-- DIUBAH SUAI: Pautan Google Maps dibetulkan -->
                    <a href="https://www.google.com/maps/search/?api=1&query=No+112+Jalan+Senimas+9,+72000+Kuala+Pilah,+Negeri+Sembilan" target="_blank" rel="noopener noreferrer"><i class="fab fa-google"></i> Google Maps</a>
                    <a href="https://www.waze.com/en/live-map/directions/my/negeri-sembilan/kuala-pilah/112,-jalan-senimas-9?place=EkIxMTIsIEphbGFuIFNlbmltYXMgOSwgNzIwMDAgS3VhbGEgUGlsYWgsIE5lZ2VyaSBTZW1iaWxhbiwgTWFsYXlzaWEiMBIuChQKEgmburmncXLOMRFRW1JkPW9IghBwKhQKEgmtiNK3cXLOMRFSfjhCY268cg" target="_blank" rel="noopener noreferrer"><i class="fab fa-waze"></i> Waze</a>
                 </div>
                 <h3 class="animate-on-scroll"><i class="fa-solid fa-calendar-check"></i>Tarikh</h3>
                 <p class="animate-on-scroll" style="margin-top: 10px;"> Sabtu, 27 Disember 2025 </p>
                 <button id="btn-add-calendar-inline" class="modal-button animate-on-scroll" style="margin: 20px auto 10px auto; display: inline-flex; background-color: var(--theme-primary);">
                     <i class="fa-solid fa-calendar-plus" style="margin-right: 8px;"></i> Simpan Tarikh Ini
                 </button>
                 <h3 class="animate-on-scroll"><i class="fa-solid fa-clock"></i>Waktu</h3>
                 <p class="animate-on-scroll" style="margin-top: 10px;"> 11.30 pagi - 3.30 petang </p>
                 <div class="program-box animate-on-scroll">
                     <h4>Atur Cara Majlis</h4>
                     <ul> <li> <strong>11.30 pagi</strong> <span>Kehadiran tetamu</span> </li> <li> <strong>12.00 tengah hari</strong> <span>Ketibaan pengantin</span> </li> <li> <strong>3.30 petang</strong> <span>Majlis tamat</span> </li> </ul>
                 </div>
            </section>

            <section class="doa">
                 <p class="animate-on-scroll">
                     “Ya Allah Ya Rahman Ya Rahim, berkatilah dan mudahkanlah majlis kami ini. Limpahkanlah rahmat serta kasih sayang-Mu ke atas kedua mempelai, dan jadikanlah penyatuan ini permulaan kehidupan yang penuh bahagia serta diberkati. Kurniakanlah kepada mereka zuriat yang soleh dan solehah, penyejuk mata dan penenang jiwa, agar keluarga ini sentiasa dalam lindungan rahmat dan kasih-Mu, Ya Allah. Amin.”
                 </p>
            </section>

            <section class="details" style="padding-top: 0px;">
                 <h3 class="animate-on-scroll">Detik menuju hari bahagia</h3>
                 <div id="countdown" class="animate-on-scroll">
                     <div class="time-block"><span id="days">00</span> <span class="label">Hari</span></div> <div class="time-block"><span id="hours">00</span> <span class="label">Jam</span></div> <div class="time-block"><span id="mins">00</span> <span class="label">Minit</span></div> <div class="time-block"><span id="secs">00</span> <span class="label">Saat</span></div>
                 </div>
            </section>

            <section class="rsvp-prompt animate-on-scroll">
                <p>
                     Kami tidak sabar untuk meraikan hari bahagia ini bersama anda! ✨<br><br>
                     Mohon sahkan kehadiran anda (RSVP) sebelum <strong>6 Disember 2025</strong> agar kami dapat menyediakan persiapan terbaik untuk anda. 💐<br>
                     Kehadiran anda amat bermakna buat kami.
                </p>
                <button id="btn-rsvp-inline" class="modal-button" style="background-color: var(--theme-secondary);">
                    <i class="fa-solid fa-envelope-open-text" style="margin-right: 8px;"></i> Sahkan Kehadiran Anda
                </button>
            </section>

            <section class="wishes">
                <h3 class="animate-on-scroll">Ucapan Tetamu</h3>
                <div class="wishes-list animate-on-scroll" id="wishesList"> </div>
            </section>

            <section class="songket-footer"> <p>Semoga dengan kehadiran dan doa restu hadirin sekalian akan menyerikan lagi majlis kami serta diberkati oleh Allah S.W.T.</p> <p>Terima kasih.</p> </section>

            <footer class="signature-footer">
                <p>Kad digital ini direka eksklusif oleh<br>
                    <a href="http://studio.rienhub.com" target="_blank" rel="noopener noreferrer" class="footer-link-animate">RienHub Studio</a> ✦ Cipta kenangan digital anda hari ini.
                </p>
            </footer>
        </div>
    </div>

    <!-- DITAMBAH: Label ARIA pada butang tutup -->
    <div id="modal-calendar" class="modal"> <div class="modal-content"> <span class="modal-close" data-modal="modal-calendar" aria-label="Tutup tetingkap">×</span> <h4>Tambah ke Kalendar</h4> <a href="#" target="_blank" class="modal-button google" id="btn-google-cal"><i class="fab fa-google"></i> Google Calendar</a> 
        <a id="btn-ics-cal" href="#" download="walimatul-urus.ics" class="modal-button apple"><i class="fa-solid fa-calendar-arrow-down"></i> Apple / Outlook</a> </div> </div>
    <div id="modal-hubungi" class="modal"> <div class="modal-content"> <span class="modal-close" data-modal="modal-hubungi" aria-label="Tutup tetingkap">×</span> <h4>Hubungi</h4> <p style="text-align:center;">Hubungi wakil keluarga:</p> <strong style="display:block; text-align:center; margin-top:15px;">Za'aba (Bapa Pengantin)</strong> <a href="https://wa.me/60192995871" target="_blank" class="modal-button whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp Za'aba</a> <a href="tel:+60192995871" class="modal-button telefon"><i class="fas fa-phone"></i> Telefon Za'aba</a> <strong style="display:block; text-align:center; margin-top:15px;">Haslina (Mak Pengantin)</strong> <a href="https://wa.me/60192995872" target="_blank" class="modal-button whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp Haslina</a> <a href="tel:+60192995872" class="modal-button telefon"><i class="fas fa-phone"></i> Telefon Haslina</a> </div> </div>
    <div id="modal-lokasi" class="modal"> <div class="modal-content"> <span class="modal-close" data-modal="modal-lokasi" aria-label="Tutup tetingkap">×</span> <h4>Lokasi Majlis</h4> <p style="text-align:center;">No 112 Jalan Senimas 9, 72000 Kuala Pilah</p> 
        <a href="https://www.google.com/maps/search/?api=1&query=No+112+Jalan+Senimas+9,+72000+Kuala+Pilah,+Negeri+Sembilan" target="_blank" class="modal-button"><i class="fab fa-google"></i> Google Maps</a> 
        <a href="https://www.waze.com/en/live-map/directions/my/negeri-sembilan/kuala-pilah/112,-jalan-senimas-9?place=EkIxMTIsIEphbGFuIFNlbmltYXMgOSwgNzIwMDAgS3VhbGEgUGlsYWgsIE5lZ2VyaSBTZW1iaWxhbiwgTWFsYXlzaWEiMBIuChQKEgmburmncXLOMRFRW1JkPW9IghBwKhQKEgmtiNK3cXLOMRFSfjhCY268cg" target="_blank" class="modal-button waze"><i class="fab fa-waze"></i> Waze</a> </div> </div>
    <div id="modal-rsvp" class="modal" style="align-items: flex-start; overflow-y: auto; padding-top: 20px;"> <div class="modal-content"> <span class="modal-close" data-modal="modal-rsvp" aria-label="Tutup tetingkap">×</span> <h4>RSVP</h4> <p style="text-align:center;">Sila sahkan kehadiran anda.</p> <form class="rsvp-form" id="rsvpForm"> <div class="form-group"> <label>Status Kehadiran:</label> <div class="radio-group"> <label><input type="radio" id="hadir" name="guestStatus" value="Hadir" required> Hadir</label> <label><input type="radio" id="tidak-hadir" name="guestStatus" value="Tidak Hadir" required> Tidak Hadir</label> </div> </div> <div class="form-group"> <label for="guestName">Nama Penuh:</label> <input type="text" id="guestName" name="guestName" placeholder="Cth: Ahmad & Keluarga" required> </div> <div class="form-group"> <label for="guestPhone">No. Telefon:</label> <input type="tel" id="guestPhone" name="guestPhone" placeholder="Cth: 012-3456789" required> </div> <div id="hadir-fields" style="display: none;"> <div class="form-group"> <label>Jumlah Kehadiran:</label> <div class="radio-group pax-options"> <label><input type="radio" id="pax1" name="guestPax" value="1 Orang"> 1 Orang</label> <label><input type="radio"id="pax2" name="guestPax" value="2 Orang"> 2 Orang</label> <label><input type="radio" id="pax3" name="guestPax" value="3 Orang"> 3 Orang</label> </div> </div> </div> <div class="form-group"> <label for="guestUcapan">Ucapan:</label> <textarea id="guestUcapan" name="guestUcapan" rows="4" placeholder="Tinggalkan ucapan untuk kami..."></textarea> </div> <button type="submit" class="form-submit" id="submitButton">Hantar RSVP</button> </form> <div id="rsvp-message"></div> </div> </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // === [JS] LOGIK AUTO-SKROL === //
            let autoScrollRequest = null; let userScrolled = false;
            function stopAutoScroll() { if (autoScrollRequest) { cancelAnimationFrame(autoScrollRequest); autoScrollRequest = null; } userScrolled = true; window.removeEventListener('wheel', stopAutoScroll); window.removeEventListener('touchmove', stopAutoScroll); }
            function startAutoScroll() { if (userScrolled) return; window.scrollTo(0, 0); userScrolled = false; function scrollStep() { if (userScrolled) return; const t = document.documentElement.scrollHeight - window.innerHeight; if (window.pageYOffset < t) { window.scrollTo(0, window.pageYOffset + 0.8); autoScrollRequest = requestAnimationFrame(scrollStep); } else { stopAutoScroll(); } } autoScrollRequest = requestAnimationFrame(scrollStep); }
            window.addEventListener('wheel', stopAutoScroll, { passive: true }); window.addEventListener('touchmove', stopAutoScroll, { passive: true });

            // === [JS] LOGIK MUZIK === //
            const music = document.getElementById('bg-music'); const musicToggle = document.getElementById('music-toggle'); const musicIcon = musicToggle.querySelector('i');
            function toggleMusic() { 
                // DITAMBAH: Hentikan TTS jika muzik ditukar
                if (window.speechSynthesis && window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel();
                }
                if (music.paused) { music.play().catch(e => console.error("Autoplay dihalang:", e)); musicIcon.classList.remove('fa-volume-xmark'); musicIcon.classList.add('fa-music'); musicToggle.classList.add('spinning'); } else { music.pause(); musicIcon.classList.remove('fa-music'); musicIcon.classList.add('fa-volume-xmark'); musicToggle.classList.remove('spinning'); } 
            }
            musicToggle.addEventListener('click', toggleMusic);

            // === [JS] LOGIK BUKA KAD (OVERLAY) === //
            const overlay = document.getElementById('myOverlay');
            overlay.addEventListener('click', function() {
                console.log("Overlay diklik. Membuka kad..."); // Log 1: Overlay diklik
                document.body.classList.add('is-open'); document.body.classList.remove('no-scroll');

                // DITAMBAH: Getaran (Vibration)
                if ('vibrate' in navigator) {
                    try {
                        navigator.vibrate(200); // Getar selama 200ms
                    } catch (e) {
                        console.warn("Vibrate gagal:", e);
                    }
                }

                 // CUBA MAIN MUZIK SERTA MERTA
                 try {
                     console.log("Mencuba music.play() serta merta..."); // Log 2: Cuba main
                     music.play().then(() => {
                         console.log("Muzik berjaya dimainkan serta merta."); // Log 3a: Berjaya
                         musicIcon.classList.add('fa-music'); musicToggle.classList.add('spinning');
                     }).catch(e => {
                         console.error("Gagal main muzik serta merta (mungkin autoplay disekat):", e); // Log 3b: Gagal
                         musicIcon.classList.remove('fa-music'); musicIcon.classList.add('fa-volume-xmark'); musicToggle.classList.remove('spinning');
                     });
                 } catch (e) {
                     console.error("Ralat semasa cuba music.play() serta merta:", e); // Log 3c: Ralat lain
                 }

                 // Teruskan dengan animasi & lain-lain selepas delay
                 setTimeout(() => {
                     console.log("Timeout selesai. Memulakan auto-scroll & kelopak."); // Log 4: Timeout selesai
                     startAutoScroll();
                     createPetals(25); /* Panggil fungsi kelopak */
                 }, 1800); 
            });
            document.body.classList.add('no-scroll');

            // === [JS] LOGIK ANIMASI SEMASA SKROL === //
            const animatedElements = document.querySelectorAll('.animate-on-scroll'); const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('is-visible'); } else { entry.target.classList.remove('is-visible'); } }); }, { root: null, threshold: 0.1 }); animatedElements.forEach(el => { observer.observe(el); });

            // === [JS] LOGIK COUNTDOWN === //
            const weddingDate = new Date(2025, 11, 27, 11, 30, 0).getTime();
            const countdownInterval = setInterval(function() { const n = new Date().getTime(); const d = weddingDate - n; const c = document.getElementById('countdown'); if (d < 0) { clearInterval(countdownInterval); if (c) { c.innerHTML = "<p style='font-size: 1.2rem; color: #004d40;'>Majlis Telah Berlangsung</p>"; } const dE=document.getElementById('days'), hE=document.getElementById('hours'), mE=document.getElementById('mins'), sE=document.getElementById('secs'); if(dE)dE.innerText="00"; if(hE)hE.innerText="00"; if(mE)mE.innerText="00"; if(sE)sE.innerText="00"; } else { const dy=Math.floor(d/(1000*60*60*24)); const hr=Math.floor((d%(1000*60*60*24))/(1000*60*60)); const mn=Math.floor((d%(1000*60*60))/(1000*60)); const sc=Math.floor((d%(1000*60))/1000); const dE=document.getElementById('days'), hE=document.getElementById('hours'), mE=document.getElementById('mins'), sE=document.getElementById('secs'); if(dE)dE.innerText=(dy<10)?"0"+dy:dy; if(hE)hE.innerText=(hr<10)?"0"+hr:hr; if(mE)mE.innerText=(mn<10)?"0"+mn:mn; if(sE)sE.innerText=(sc<10)?"0"+sc:sc; } }, 1000);

            // === [JS] LOGIK MODAL (POP-UP) === //
            const modals = { calendar: document.getElementById('modal-calendar'), hubungi: document.getElementById('modal-hubungi'), lokasi: document.getElementById('modal-lokasi'), rsvp: document.getElementById('modal-rsvp') };
            const buttons = { calendar: document.getElementById('btn-calendar'), hubungi: document.getElementById('btn-hubungi'), lokasi: document.getElementById('btn-lokasi'), rsvp: document.getElementById('btn-rsvp'), addCalendarInline: document.getElementById('btn-add-calendar-inline'), rsvpInline: document.getElementById('btn-rsvp-inline') };
            const closeButtons = document.querySelectorAll('.modal-close');
            function openModal(m) { if(m) { m.style.display = 'flex'; document.body.classList.add('no-scroll'); } }
            function closeModal(m) { if(m) { m.style.display = 'none'; if (document.querySelectorAll('.modal[style*="display: flex"]').length === 0 && document.body.classList.contains('is-open')) { document.body.classList.remove('no-scroll'); } } }
            if (buttons.calendar) buttons.calendar.onclick = () => openModal(modals.calendar); if (buttons.hubungi) buttons.hubungi.onclick = () => openModal(modals.hubungi); if (buttons.lokasi) buttons.lokasi.onclick = () => openModal(modals.lokasi); if (buttons.rsvp) buttons.rsvp.onclick = () => openModal(modals.rsvp);
            if (buttons.addCalendarInline) buttons.addCalendarInline.onclick = () => openModal(modals.calendar); if (buttons.rsvpInline) buttons.rsvpInline.onclick = () => openModal(modals.rsvp);
            closeButtons.forEach(b => b.onclick = () => closeModal(b.closest('.modal'))); window.onclick = function(e) { if (e.target.classList.contains('modal')) { closeModal(e.target); } }

            // === [JS] LOGIK PENJANA KALENDAR (.ics & Google) === //
            const eventDetails = { title: "Walimatul Urus Amrin, Sabrina, Raziq & Rasyiqah", description: "Majlis Perkahwinan Amrin & Sabrina dan Raziq & Rasyiqah. Kehadiran anda amat dialu-alukan.", location: "No 112 Jalan Senimas 9, 72000 Kuala Pilah, Negeri Sembilan.", startTime: "20251227T033000Z", endTime: "20251227T073000Z" };
            function generateICSFile() { const iC=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","URL:"+window.location.href,"DTSTART:"+eventDetails.startTime,"DTEND:"+eventDetails.endTime,"SUMMARY:"+eventDetails.title,"DESCRIPTION:"+eventDetails.description,"LOCATION:"+eventDetails.location,"END:VEVENT","END:VCALENDAR"].join("\n"); const iDU="data:text/calendar;charset=utf-8,"+encodeURIComponent(iC); document.getElementById('btn-ics-cal').href=iDU; }
            function generateGoogleCalLink() { const gL=new URL("https://www.google.com/calendar/render"); gL.searchParams.append("action","TEMPLATE"); gL.searchParams.append("text",eventDetails.title); gL.searchParams.append("dates",eventDetails.startTime+"/"+eventDetails.endTime); gL.searchParams.append("details",eventDetails.description); gL.searchParams.append("location",eventDetails.location); document.getElementById('btn-google-cal').href=gL.href; }
            generateICSFile(); generateGoogleCalLink();

            // === [JS] LOGIK BORANG RSVP === //
            const rsvpForm = document.getElementById('rsvpForm'); const submitButton = document.getElementById('submitButton'); const rsvpMessage = document.getElementById('rsvp-message'); const radioHadir = document.getElementById('hadir'); const radioTidakHadir = document.getElementById('tidak-hadir'); const hadirFields = document.getElementById('hadir-fields'); const paxRadios = document.querySelectorAll('input[name="guestPax"]'); const firstPaxRadio = document.getElementById('pax1');
            function setPaxRequired(iR) { if (firstPaxRadio) { firstPaxRadio.required = iR; } if (!iR) { paxRadios.forEach(r => r.checked = false); } }
            if (radioHadir) { radioHadir.addEventListener('change', () => { if (hadirFields) hadirFields.style.display = 'block'; setPaxRequired(true); }); } if (radioTidakHadir) { radioTidakHadir.addEventListener('change', () => { if (hadirFields) hadirFields.style.display = 'none'; setPaxRequired(false); }); }
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxgavI5g9FegAR1bGasdGb9D-q212uFHOQN0ixFo0xcbrK625VQp_fwcyfki189A_a1Nw/exec';
            if (rsvpForm) { rsvpForm.addEventListener('submit', function(e) { e.preventDefault(); if (submitButton) { submitButton.disabled = true; submitButton.innerText = "Menghantar..."; } fetch(scriptURL, { method: 'POST', body: new FormData(rsvpForm) }).then(r => r.json()).then(d => { console.log('Success!', d); if(d.result === "success") { if (rsvpMessage) { rsvpMessage.innerText = "Terima kasih! RSVP anda telah diterima."; rsvpMessage.style.color = "green"; } rsvpForm.reset(); if(hadirFields) hadirFields.style.display = 'none'; setPaxRequired(false); } else { throw new Error(d.message || 'Ralat tidak diketahui.'); } if (submitButton) { submitButton.disabled = false; submitButton.innerText = "Hantar RSVP"; } setTimeout(() => { closeModal(modals.rsvp); if (rsvpMessage) rsvpMessage.innerText = ""; loadWishes(); }, 2000); }).catch(er => { console.error('Error!', er.message); if (rsvpMessage) { rsvpMessage.innerText = "Maaf, berlaku ralat. Sila cuba lagi."; rsvpMessage.style.color = "red"; } if (submitButton) { submitButton.disabled = false; submitButton.innerText = "Hantar RSVP"; } }); }); }

             // === [JS] FUNGSI BARU UNTUK CIPTA KELOPAK === //
             function createPetals(count) {
                 const container = document.querySelector('.petals-container');
                 if (!container) return;
                 const petalColors = [ 'var(--theme-secondary)', 'rgba(253, 251, 245, 0.85)', 'rgba(218, 165, 32, 0.7)', 'rgba(0, 77, 64, 0.6)', '#FFC0CB', 'rgba(255, 255, 255, 0.8)' ];
                 for (let i = 0; i < count; i++) {
                     const petal = document.createElement('span'); petal.className = 'petal';
                     const baseSize = window.innerWidth < 480 ? (Math.random() * 4 + 8) : (Math.random() * 6 + 10);
                     petal.style.width = `${baseSize}px`; petal.style.height = `${baseSize * 1.3}px`;
                     petal.style.left = Math.random() * 100 + 'vw';
                     petal.style.animationDuration = (Math.random() * 15 + 10) + 's';
                     petal.style.animationDelay = (Math.random() * -20) + 's';
                     petal.style.setProperty('--drift', `${(Math.random() - 0.5) * 12}vw`);
                     const startRotation = Math.random() * 60 - 30;
                     petal.style.setProperty('--start-rotate', `${startRotation}deg`);
                     petal.style.transform = `rotate(${startRotation}deg)`;
                     petal.style.backgroundColor = petalColors[Math.floor(Math.random() * petalColors.length)];
                     container.appendChild(petal);
                 }
             }

            // === [JS] LOGIK MEMUATKAN UCAPAN === //
            function loadWishes() { const gWU = 'https://script.google.com/macros/s/AKfycbxgavI5g9FegAR1bGasdGb9D-q212uFHOQN0ixFo0xcbrK625VQp_fwcyfki189A_a1Nw/exec'; const wL = document.getElementById('wishesList'); if (!wL) return; wL.innerHTML = '<p style="text-align: center; color: #777;">Memuatkan ucapan...</p>'; fetch(gWU).then(r => { if (!r.ok) { return r.text().then(t => { throw new Error('Network response error: ' + t) }); } return r.json().catch(e => { console.warn("Gagal parse JSON, mungkin teks biasa?", e); return r.text(); }); }).then(d => { wL.innerHTML = ''; let wF = false; if (d && Array.isArray(d) && d.length > 0) { d.reverse().forEach(w => { const uT = w['Ucapan'] || 'Tiada ucapan'; const nP = w['Nama Penuh'] || 'Tetamu Tanpa Nama'; if (uT.trim() !== 'Tiada ucapan' && uT.trim() !== '') { wF = true; const wI = document.createElement('div'); wI.className = 'wish-item'; wI.innerHTML = `<p class="wish-text">"${uT}"</p><p class="wish-author">- ${nP} -</p>`; wL.appendChild(wI); } }); if (!wF) { wL.innerHTML = '<p style="text-align: center; color: #777;">Jadilah yang pertama mengucapkan!</p>'; } } else if (typeof d === 'string' && d.startsWith("Error:")) { console.error("Ralat dari Google Script:", d); wL.innerHTML = `<p style="text-align: center; color: red;">Gagal memuatkan ucapan. Semak URL Google Script GET.</p>`; } else { wL.innerHTML = '<p style="text-align: center; color: #777;">Jadilah yang pertama mengucapkan!</p>'; } }).catch(er => { console.error('Error loading wishes:', er); wL.innerHTML = `<p style="text-align: center; color: red;">Gagal memuatkan ucapan.</p>`; }); }
             loadWishes();

            // === [JS] DITAMBAH: LOGIK KEBOLEHAKSESAN (ACCESSIBILITY) === //
            const accessibilityToggle = document.getElementById('accessibility-toggle');
            if (accessibilityToggle) {
                accessibilityToggle.addEventListener('click', () => {
                    document.body.classList.toggle('accessibility-mode');
                    accessibilityToggle.classList.toggle('active');
                });
            }

            // === [JS] DITAMBAH: LOGIK BACA JEMPUTAN (TEXT-TO-SPEECH) === //
            const readAloudButton = document.getElementById('btn-read-aloud');
            if (readAloudButton) {
                readAloudButton.addEventListener('click', () => {
                    if (typeof SpeechSynthesisUtterance === 'undefined' || typeof window.speechSynthesis === 'undefined') {
                        // Tidak boleh guna alert()
                        console.error("TTS tidak disokong.");
                        // Mungkin tunjuk mesej ralat dalam modal? Buat masa sekarang, log ke konsol.
                        return;
                    }

                    // Hentikan apa-apa bacaan/muzik
                    if (window.speechSynthesis.speaking) {
                        window.speechSynthesis.cancel(); // Ini akan trigger 'onend'
                        return;
                    }
                    if (!music.paused) {
                        toggleMusic(); // Jeda muzik jika sedang bermain
                    }

                    // Kumpul teks
                    const textToRead = [
                        document.querySelector('.invitation-topic').textContent,
                        "Dengan penuh kesyukuran kami menjemput Yang Berbahagia, Tuan, Puan,",
                        "ke majlis meraikan cinta putera-putera kesayangan kami",
                        document.querySelectorAll('.couple-name')[0].textContent, // Amrin
                        "dan",
                        document.querySelectorAll('.couple-name')[1].textContent, // Sabrina
                        "dan juga",
                        document.querySelectorAll('.couple-name')[2].textContent, // Raziq
                        "dan",
                        document.querySelectorAll('.couple-name')[3].textContent, // Rasyiqah
                        "pada hari Sabtu, 27 Disember 2025,",
                        "di kediaman kami, No 112 Jalan Senimas 9, 72000 Kuala Pilah, Negeri Sembilan.",
                        "Jam 11.30 pagi hingga 3.30 petang."
                    ].join('. ');

                    const utterance = new SpeechSynthesisUtterance(textToRead);
                    utterance.lang = 'ms-MY'; // Set bahasa Melayu
                    utterance.pitch = 1;
                    utterance.rate = 0.9;
                    
                    const readIcon = readAloudButton.querySelector('i');
                    // Dapatkan elemen teks (anak terakhir butang)
                    const readTextNode = readAloudButton.childNodes[readAloudButton.childNodes.length - 1];

                    utterance.onstart = () => {
                        readIcon.classList.remove('fa-volume-high');
                        readIcon.classList.add('fa-stop-circle');
                        readTextNode.nodeValue = " Hentikan";
                    };

                    utterance.onend = () => {
                        readIcon.classList.remove('fa-stop-circle');
                        readIcon.classList.add('fa-volume-high');
                        readTextNode.nodeValue = " Baca Jemputan";
                    };
                    
                    window.speechSynthesis.speak(utterance);
                });
            }
            // Hentikan TTS jika modal ditutup atau skrol bermula
            window.addEventListener('scroll', () => {
                if (window.speechSynthesis && window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel();
                }
            });
            closeButtons.forEach(b => b.addEventListener('click', () => {
                 if (window.speechSynthesis && window.speechSynthesis.speaking) {
                    window.speechSynthesis.cancel();
                }
            }));


        }); // <- Penutup untuk 'DOMContentLoaded'
    </script>
    </body>
</html>

